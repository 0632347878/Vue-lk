<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
</head>
    <body>
        <div class="wrapper">
            <div class="sample">
                <form>
                    <div class="progress">
                        <div :style="progressWidth" class="progress-bar"></div>
                    </div>
                    <div>
                        <div class="form-group" v-for="(item, index) in info">
                            <label>{{ item.name }}</label>
                            <span v-if="controls[index].error">1</span>
                            <span v-else>2</span>
                            <span v-if="controls[index].activated"
                                  class="fa"
                                  :class="controls[index].error ? 'fa-exclamation-circle text-danger' : 'fa-check-circle text-success' "
                            ></span>
                            <input type="text" class="form-control"
                            :value="item.value"
                            @input="onInput(index, $event.target.value)"
                            >
                        </div>
                    </div>
                    <button class="btn btn-primary" :disabled="done < info.length">
                        Send Data
                    </button>
                    <span>{{done}}</span>
                </form>
                <div>
                    <table class="table table-bordered">
                        <tr v-for="(item, index) in info">
                            <td>{{ item.name }}</td>
                            <td>{{ item.value }}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </body>
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/vue.js"></script>
<script src="js/main.js"></script>
<script>

    new Vue({
        el: '.sample',
        data: {
            info: [
                {
                    name: 'Name',
                    value: '',
                    pattern: /^[a-zA-Z ]{2,30}$/
                },
                {
                    name: 'Phone',
                    value: '',
                    pattern: /^[0-9]{7,14}$/
                },
                {
                    name: 'Email',
                    value: '',
                    pattern: /.+/
                },
                {
                    name: 'Some Field 1',
                    value: '',
                    pattern: /.+/
                },
                {
                    name: 'Some Field 2',
                    value: '',
                    pattern: /.+/
                }
            ],
            controls: []
        },
        beforeMount(){
            for(let i = 0; i < this.info.length; i++) {
                this.controls.push({
                    error: true,
                    activated: false
                })
            }
        },
        methods: {
            onInput(index, value) {
                let data = this.info[index];
                let control = this.controls[index];


                data.value = value;
                control.error = !data.pattern.test(value);
                control.activated = true;
            }
        },
        computed: {
            done() {
                 let done = 0;

                 for(let i = 0; i < this.controls.length; i++) {
                     if(!this.controls[i].error) {
                         done++;
                      }
                 }

                 return done;
            },
            progressWidth() {
                return{
                    width: this.done/this.info.length * 100 + '%'
                }
            }
        }
    });
</script>
<style>
    .wrapper {
        max-width: 300px;
        padding: 10px 20px;
    }
    .form-groupe {
        margin-bottom: 10px; }
    .form-groupe:first-child {
        margin-top: 30px;
    }
    .btn.btn-primary {
        max-width: 50px;
        margin-left: 20px;
    }
    .table td:first-child {
        width: 75%;
        min-width: 90px;
    }
</style>

</body>
</html>